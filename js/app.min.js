"use strict";var getRandomInt=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},roundRect=function(t,e,i,a,r,n,s,o){"undefined"==typeof o&&(o=!0),"undefined"==typeof n&&(n=5),t.beginPath(),t.moveTo(e+n,i),t.lineTo(e+a-n,i),t.quadraticCurveTo(e+a,i,e+a,i+n),t.lineTo(e+a,i+r-n),t.quadraticCurveTo(e+a,i+r,e+a-n,i+r),t.lineTo(e+n,i+r),t.quadraticCurveTo(e,i+r,e,i+r-n),t.lineTo(e,i+n),t.quadraticCurveTo(e,i,e+n,i),t.closePath(),o&&t.stroke(),s&&t.fill()},makePixelGrayScale=function(t,e,i){var a=.3*t+.59*e+.11*i;return{r:a,g:a,b:a,a:a}},makeGrayScale=function(t){for(var e,i,a,r,n=t.data.length/4,s=0;n>s;s++){e=t.data[4*s+0],i=t.data[4*s+1],a=t.data[4*s+2],r=t.data[4*s+3];var o=makePixelGrayScale(e,i,a,r);t.data[4*s+0]=o.r,t.data[4*s+1]=o.g,t.data[4*s+2]=o.b,t.data[4*s+3]=o.a}ctx.putImageData(t,0,0)},scoreBoard=function(){ctx.fillStyle="#fff",ctx.fillRect(505,0,200,606),ctx.font="700 24px Kalam",ctx.fillStyle="#932703",ctx.textAlign="left",ctx.fillText("Time Left: "+player.timer.toFixed(1),515,100),ctx.fillText("Score: "+player.score,515,150),ctx.font="400 18px Kalam",ctx.fillStyle="#932703",ctx.strokeStyle="#932703",roundRect(ctx,515,280,80,30,3,!0),roundRect(ctx,515,375,56,28,3,!0),ctx.fillStyle="#fff",ctx.fillText("Spacebar",520,300),ctx.fillText("Enter",520,395),ctx.fillStyle="#932703",ctx.fillText("to pause",515,336),ctx.fillText("for instructions",515,430)},startScreen=function(){ctx.clearRect(0,0,705,606),ctx.fillStyle="#932703",ctx.fillRect(5,5,695,596),ctx.fillStyle="#fff",ctx.font="700 48px Kalam",ctx.textAlign="center",ctx.fillText("Udacity Frogger!",356,60),ctx.fillStyle="#e9812b",ctx.fillRect(5,85,695,40),ctx.fillStyle="#fff",ctx.font="400 24px Kalam",ctx.fillText("Created by Lauren Tucker to meet Project 3 specifications",356,112),ctx.fillStyle="#fff",roundRect(ctx,80,155,200,50,5,!0),ctx.fillStyle="#000",ctx.fillText("Meet the Cast",180,190),ctx.drawImage(Resources.get("images/char-horn-girl.png"),20,170),ctx.textAlign="left",ctx.fillText("Our Hero",150,270),ctx.drawImage(Resources.get("images/enemy-bug.png"),20,250),ctx.fillText("Our Enemies",150,370),ctx.drawImage(Resources.get("images/gem-orange.png"),20,350),ctx.fillText("Our Loot",150,470),ctx.textAlign="center",ctx.fillStyle="#fff",roundRect(ctx,415,155,200,50,5,!0),ctx.fillStyle="#000",ctx.fillText("Learn the Rules",515,190),ctx.font="400 18px Kalam",ctx.fillText("You have 10 seconds to get to the water.",515,250),ctx.fillText("Getting to the water nets you 5 points.",515,280),ctx.fillText("Pick up a gemstone on the way,",515,310),ctx.fillText("get an extra 5 points.",515,328),ctx.fillText("Bugs will eat you. And cost you 5 points.",515,358),ctx.fillText("And don't just stand around.",515,388),ctx.fillText("Running out of time costs 10 points.",515,406),ctx.fillText("The game is over when your",515,436),ctx.fillText("score falls below zero.",515,454),ctx.fillText("How do you win? We're all winners. Just",515,484),ctx.fillText("close the browser when you get bored.",515,500),ctx.fillStyle="#fff",roundRect(ctx,160,530,375,50,5,!0),ctx.fillStyle="#000",ctx.textAlign="left",ctx.font="400 24px Kalam",ctx.fillText("Ready to Play? Hit",200,565),ctx.fillStyle="#e9812b",roundRect(ctx,410,540,80,30,5,!0),ctx.fillStyle="#fff",ctx.fillText("Enter",420,562),ctx.lineWidth=6,ctx.strokeStyle="#000",roundRect(ctx,5,5,695,596,5,!1,!0)},gamePlay=!1,gamePlayToggle=function(){gamePlay=!gamePlay},pause=!1,pauseToggle=function(){pause=!pause},MessageScreen=function(t,e,i){this.width=705,this.height=606,this.textLineOne=t,this.textLineTwo=e,this.textLineThree=i};MessageScreen.prototype.imageData=function(){return ctx.getImageData(0,0,this.width,this.height)},MessageScreen.prototype.textLineOneFormatted=function(){this.x=253,this.y=303,ctx.font="700 24px Kalam",ctx.fillStyle="#000",ctx.textAlign="center",ctx.fillText(this.textLineOne,this.x,this.y)},MessageScreen.prototype.textLineTwoFormatted=function(){this.x=253,this.y=343,ctx.font="400 18px Kalam",ctx.fillText(this.textLineTwo,this.x,this.y)},MessageScreen.prototype.textLineThreeFormatted=function(){this.x=253,this.y=363,ctx.fillText(this.textLineThree,this.x,this.y)},MessageScreen.prototype.formatText=function(){this.textLineOneFormatted(),this.textLineTwoFormatted(),this.textLineThreeFormatted()},MessageScreen.prototype.display=function(){makeGrayScale(this.imageData()),this.formatText()};var Gem=function(){this.xArray=[2,102,202,302,402],this.xArrayLength=this.xArray.length,this.yArray=[230,145,60],this.yArrayLength=this.yArray.length,this.sprite="images/gem-orange.png",this.x=this.xArray[Math.floor(Math.random()*this.xArrayLength)],this.y=this.yArray[Math.floor(Math.random()*this.yArrayLength)]};Gem.prototype.update=function(){this.x=this.xArray[Math.floor(Math.random()*this.xArrayLength)],this.y=this.yArray[Math.floor(Math.random()*this.yArrayLength)]},Gem.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var Enemy=function(t){this.sprite="images/enemy-bug.png",this.x=getRandomInt(-50,-500),this.y=t,this.speed=getRandomInt(200,400),this.width=101};Enemy.prototype.update=function(t){this.x+=this.speed*t,this.x>505&&this.reset()},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Enemy.prototype.reset=function(){this.x=getRandomInt(-50,-500),this.speed=getRandomInt(200,400)};var Player=function(t,e){this.sprite="images/char-horn-girl.png",this.x=t,this.y=e,this.offsetX=10,this.width=101,this.score=0,this.timer=10,this.moveHorizontal=100,this.moveVertical=85};Player.prototype.update=function(){},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(t){switch(t){case"left":if(this.x>2&&!pause){this.x-=this.moveHorizontal;break}break;case"right":if(this.x<402&&!pause){this.x+=this.moveHorizontal;break}break;case"up":if(this.y>60&&!pause){this.y-=this.moveVertical;break}if(60!==this.y||pause)break;this.score+=5,this.reset(),this.timer=10,gem.update();break;case"down":if(this.y<400&&!pause){this.y+=this.moveVertical;break}break;case"spacebar":pauseToggle();break;case"enter":gamePlayToggle()}},Player.prototype.reset=function(){this.x=202,this.y=400},Player.prototype.clock=function(t){for(;this.timer>0;)return this.timer=this.timer-t,this.timer},Player.prototype.checkTimer=function(){this.timer<=0&&(this.score-=10,this.reset(),this.timer=10,gem.update())},Player.prototype.checkGems=function(){this.x===gem.x&&this.y===gem.y&&(this.score+=5,gem.x=-100,gem.y=-100)},Player.prototype.checkCollisions=function(){for(var t,e,i,a=0;enemyArrayLength>a;a++)allEnemies[a].y===this.y&&(t=allEnemies[a].x+allEnemies[a].width,e=this.x+this.offsetX,i=this.x+this.width-2*this.offsetX,t>e&&i>t&&(this.score-=5,this.score<0?gamePlay=!1:(this.reset(),this.timer=10,gem.update())))};var player=new Player(202,400),allEnemies=[],instantiateEnemies=function(){for(var t=[60,60,145,145,230,230],e=t.length,i=0;e>i;i++){var a=new Enemy(t[i]);allEnemies.push(a)}return allEnemies},enemyArrayLength=instantiateEnemies().length,gem=new Gem,pauseScreen=new MessageScreen("GAME IS PAUSED","Hit spacebar again","to continue playing"),gameOverScreen=new MessageScreen("GAME IS OVER. YOU LOSE.","Refresh the window","to play again");document.addEventListener("keyup",function(t){var e={13:"enter",32:"spacebar",37:"left",38:"up",39:"right",40:"down"};player.handleInput(e[t.keyCode])});